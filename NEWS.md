# Release Notes - ÈíüÈ¶ó (Zhongkui) 

- v0.0.1

## üéâ Initial Release

We're excited to announce the first release of **ÈíüÈ¶ó (Zhongkui)** - a powerful local build performance analysis tool for Bazel monorepos.

## ‚ú® Key Features

### Core Analysis Capabilities
- **Bazel Profile Analysis**: Parse Chrome Tracing format JSON files generated by `bazel build --profile=profile.json`
- **Git Diff Integration**: Analyze file changes to identify affected Bazel packages
- **Dependency Correlation**: Advanced attribution logic that maps build time to responsible packages
- **Pure Local Operation**: Works entirely offline without requiring BEP infrastructure

### Three Analysis Modes

#### 1. Profile Analysis (`analyze`)
Analyze existing Bazel profile files with detailed timing data:
```bash
zhongkui analyze -p profile.json -c "bazel build //app:* --config=release"
```

#### 2. Run & Analyze (`run-and-analyze`) 
Execute Bazel commands with profiling and automatic analysis:
```bash
zhongkui run-and-analyze -c "bazel build //src:..." --keep-profile
```

#### 3. Impact Prediction (`predict-impact`)
Static analysis to predict affected packages before building:
```bash
zhongkui predict-impact -c "bazel build //app:*" --base-branch origin/main
```

### Advanced Attribution Logic
- **Direct Attribution**: Actions in changed packages receive full duration attribution
- **Transitive Tracking**: Actions in dependent packages tracked without double-counting
- **Shared Dependencies**: Split attribution when multiple packages contribute to an action
- **Pure Attribution**: Total attributed time equals actual build time

### Multi-Repository Support
- **External Repositories**: Full support for Bazel 6+ Bzlmod format (`@@repo~//package`)
- **Additional Repos**: Analyze changes across multiple sub-repositories
- **Scoped Analysis**: Target pattern scoping to avoid irrelevant dependency analysis

## üõ† Technical Highlights

### Architecture
- **Modular Design**: Clear separation between profile analysis, diff analysis, and dependency correlation
- **Bazel Query Integration**: Accurate target-to-package mapping using native Bazel queries
- **Performance Optimized**: Caching and incremental analysis for large monorepos

### Build System
- **Bazel + rules_js**: Modern build system with incremental compilation
- **TypeScript**: Full type safety with comprehensive type definitions
- **Node.js 20.6.0**: Latest LTS runtime managed by Bazel

### Output Formats
- **JSON Reports**: Machine-readable analysis results for data product integration
- **Markdown Reports**: Human-readable reports with actionable recommendations
- **Colorful CLI**: Enhanced terminal output with progress indicators

## üìä Report Generation

### Analysis Reports
- `report-{profileId}-{timestamp}.json` - Complete analysis data
- `report-{profileId}-{timestamp}.md` - Formatted recommendations

### Prediction Reports  
- `impact-prediction-{profileId}-{timestamp}.json` - Static impact analysis
- `impact-prediction-{profileId}-{timestamp}.md` - Pre-build planning guide

## üîß Installation & Usage

### Prerequisites
- Bazel 6.0+
- Node.js 20.6.0
- Git repository

### Quick Start
```bash
# Build the tool
bazel build //src:zhongkui

# Generate profile and analyze
bazel run //src:zhongkui -- run-and-analyze -c "bazel build //your-targets..."

# Predict impact before building
bazel run //src:zhongkui -- predict-impact -c "bazel build //your-targets..."
```

## üéØ Use Cases

- **Build Optimization**: Identify hotspots consuming the most build time
- **Change Impact Analysis**: Understand which packages are affected by code changes
- **Pre-build Planning**: Predict build impact before making changes
- **Performance Monitoring**: Track build performance over time across different branches

## üôè Acknowledgments

ÈíüÈ¶ó is designed for teams working with large-scale Bazel monorepos who need actionable insights into their build performance without complex infrastructure dependencies.

---

**Full Changelog**: Initial release

**Compatibility**: Bazel 6.0+, Node.js 20.6.0+
